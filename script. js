// FAQ toggle function
function faqToggle(btn, answer) {
  const visible = answer.style.display === 'block';
  document.querySelectorAll('.faq-answer').forEach(el => (el.style.display = 'none'));
  answer.style.display = visible ? 'none' : 'block';
}

// Language toggle Arabic <-> English
const langToggle = document.getElementById('langToggle');

const texts = {
  ar: {
    mainTitle: "ورشة إلكترونيك الرحماني - Atelier Electronique Médenine",
    mainDesc: "خدمة إلكترونيك توصلك وين ما كنت في تونس 🇹🇳",
    btnMaps: "خرائط Google",
    btnWhatsApp: "واتساب",
    servicesTitle: "خدماتنا",
    servicesList: [
      "تصليح وصيانة أجهزة إلكترونية: كمبيوتر، ثلاجات إنفرتر، كروت إلكترونية",
      "بيع قطع غيار حسب الطلب",
      "خدمة التشخيص عن بُعد بدقة عالية",
      "إرسال الصور والفيديو بالحالة قبل الإصلاح",
      "السرعة، الأمان، وضمان الخدمة"
    ],
    galleryTitle: "معرض الصور والفيديوهات",
    radioTitle: "راديو القرآن",
    newsTitle: "آخر الأخبار من BBC عربي",
    newsLoading: "جاري تحميل الأخبار...",
    faqTitle: "الأسئلة الشائعة",
    faqItems: [
      {
        question: "كيف يمكنني إرسال جهازي للإصلاح؟",
        answer: "تستطيع إرسال جهازك عبر البريد مع تعبئة نموذج التشخيص على موقعنا."
      },
      {
        question: "هل تقدمون ضمانًا على الإصلاح؟",
        answer: "نعم، نقدم ضمانًا لمدة 6 أشهر على جميع الخدمات."
      }
    ],
    footerAddress: "مدنين – نخدمو في كامل أنحاء تونس",
    footerHours: "من الإثنين للسبت، 08:00 - 18:00 | الأحد راحة"
  },
  en: {
    mainTitle: "Atelier Electronique Médenine - Electronic Repairs",
    mainDesc: "Electronic service reaching you anywhere in Tunisia 🇹🇳",
    btnMaps: "Google Maps",
    btnWhatsApp: "WhatsApp",
    servicesTitle: "Our Services",
    servicesList: [
      "Repair and maintenance of electronic devices: computers, inverter fridges, electronic cards",
      "Spare parts sales upon request",
      "Accurate remote diagnosis",
      "Sending photos and videos before repair",
      "Speed, safety, and service warranty"
    ],
    galleryTitle: "Photo & Video Gallery",
    radioTitle: "Quran Radio",
    newsTitle: "Latest News from BBC Arabic",
    newsLoading: "Loading news...",
    faqTitle: "Frequently Asked Questions",
    faqItems: [
      {
        question: "How can I send my device for repair?",
        answer: "You can send your device by mail with a diagnostic form on our website."
      },
      {
        question: "Do you offer warranty on repairs?",
        answer: "Yes, we offer a 6-month warranty on all services."
      }
    ],
    footerAddress: "Medenine – Service across Tunisia",
    footerHours: "Monday to Saturday, 08:00 - 18:00 | Sunday closed"
  }
};

let currentLang = 'ar';

function setLanguage(lang) {
  // Text replacements
  document.getElementById('mainTitle').textContent = texts[lang].mainTitle;
  document.getElementById('mainDesc').textContent = texts[lang].mainDesc;
  document.getElementById('btnMaps').textContent = texts[lang].btnMaps;
  document.getElementById('btnWhatsApp').textContent = texts[lang].btnWhatsApp;
  document.getElementById('servicesTitle').textContent = texts[lang].servicesTitle;

  const servicesList = document.getElementById('servicesList');
  servicesList.innerHTML = '';
  texts[lang].servicesList.forEach(item => {
    const li = document.createElement('li');
    li.textContent = item;
    servicesList.appendChild(li);
  });

  document.getElementById('galleryTitle').textContent = texts[lang].galleryTitle;
  document.getElementById('radioTitle').textContent = texts[lang].radioTitle;
  document.getElementById('newsTitle').textContent = texts[lang].newsTitle;

  // FAQ
  const faqContainer = document.querySelector('.faq');
  faqContainer.querySelectorAll('.faq-item').forEach(el => el.remove());
  texts[lang].faqItems.forEach(faq => {
    const faqItem = document.createElement('div');
    faqItem.classList.add('faq-item');

    const btn = document.createElement('button');
    btn.classList.add('faq-question');
    btn.textContent = faq.question;

    const ans = document.createElement('div');
    ans.classList.add('faq-answer');
    ans.textContent = faq.answer;

    faqItem.appendChild(btn);
    faqItem.appendChild(ans);
    faqContainer.appendChild(faqItem);

    btn.addEventListener('click', () => faqToggle(btn, ans));
  });

  document.getElementById('footerAddress').textContent = texts[lang].footerAddress;
  document.getElementById('footerHours').textContent = texts[lang].footerHours;

  // Direction & lang attribute
  if(lang === 'ar'){
    document.documentElement.lang = 'ar';
    document.documentElement.dir = 'rtl';
  } else {
    document.documentElement.lang = 'en';
    document.documentElement.dir = 'ltr';
  }
}

langToggle.addEventListener('click', () => {
  currentLang = currentLang === 'ar' ? 'en' : 'ar';
  setLanguage(currentLang);
  langToggle.textContent = currentLang === 'ar' ? 'English' : 'عربي';
});

// Initial language setup
setLanguage(currentLang);

// Simulated news loading
const newsList = document.getElementById('newsList');
newsList.innerHTML = `<li>${texts[currentLang].newsLoading}</li>`;

setTimeout(() => {
  const newsItems = currentLang === 'ar'
    ? [
      "تونس تُجهز لموسم سياحي ناجح رغم التحديات",
      "موجة حرّ تضرب البلاد وسط تحذيرات من الدفاع المدني",
      "تطورات جديدة في قطاع الإلكترونيات وصيانة الأجهزة"
    ]
    : [
      "Tunisia prepares for a successful tourist season despite challenges",
      "Heatwave hits the country amid civil defense warnings",
      "New developments in electronics and device repair sector"
    ];

  newsList.innerHTML = newsItems.map(item => `<li>${item}</li>`).join('');
}, 1500);
