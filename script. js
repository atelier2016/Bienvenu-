// FAQ toggle
document.querySelectorAll('.faq-question').forEach((btn) => {
  btn.addEventListener('click', () => {
    const answer = btn.nextElementSibling;
    const isVisible = answer.style.display === 'block';
    // Hide all answers
    document.querySelectorAll('.faq-answer').forEach((el) => (el.style.display = 'none'));
    // Toggle current
    answer.style.display = isVisible ? 'none' : 'block';
  });
});

// Language toggle Arabic <-> French
const langToggle = document.getElementById('langToggle');

const texts = {
  ar: {
    mainTitle: "ูุฑุดุฉ ุฅููุชุฑูููู ุงูุฑุญูุงูู - Atelier Electronique Mรฉdenine",
    mainDesc: "ุฎุฏูุฉ ุฅููุชุฑูููู ุชูุตูู ููู ูุง ููุช ูู ุชููุณ ๐น๐ณ",
    btnMaps: "ุฎุฑุงุฆุท Google",
    btnWhatsApp: "ูุงุชุณุงุจ",
    servicesTitle: "ุฎุฏูุงุชูุง",
    servicesList: [
      "ุชุตููุญ ูุตูุงูุฉ ุฃุฌูุฒุฉ ุฅููุชุฑูููุฉ: ููุจููุชุฑุ ุซูุงุฌุงุช ุฅููุฑุชุฑุ ูุฑูุช ุฅููุชุฑูููุฉ",
      "ุจูุน ูุทุน ุบูุงุฑ ุญุณุจ ุงูุทูุจ",
      "ุฎุฏูุฉ ุงูุชุดุฎูุต ุนู ุจูุนุฏ ุจุฏูุฉ ุนุงููุฉ",
      "ุฅุฑุณุงู ุงูุตูุฑ ูุงูููุฏูู ุจุงูุญุงูุฉ ูุจู ุงูุฅุตูุงุญ",
      "ุงูุณุฑุนุฉุ ุงูุฃูุงูุ ูุถูุงู ุงูุฎุฏูุฉ"
    ],
    galleryTitle: "ูุนุฑุถ ุงูุตูุฑ ูุงูููุฏูููุงุช",
    radioTitle: "ุฑุงุฏูู ุงููุฑุขู",
    newsTitle: "ุขุฎุฑ ุงูุฃุฎุจุงุฑ ูู BBC ุนุฑุจู",
    newsLoading: "ุฌุงุฑู ุชุญููู ุงูุฃุฎุจุงุฑ...",
    faqTitle: "ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ",
    faqItems: [
      {
        question: "ููู ูููููู ุฅุฑุณุงู ุฌูุงุฒู ููุฅุตูุงุญุ",
        answer: "ุชุณุชุทูุน ุฅุฑุณุงู ุฌูุงุฒู ุนุจุฑ ุงูุจุฑูุฏ ูุน ุชุนุจุฆุฉ ูููุฐุฌ ุงูุชุดุฎูุต ุนูู ูููุนูุง."
      },
      {
        question: "ูู ุชูุฏููู ุถูุงููุง ุนูู ุงูุฅุตูุงุญุ",
        answer: "ูุนูุ ููุฏู ุถูุงููุง ููุฏุฉ 6 ุฃุดูุฑ ุนูู ุฌููุน ุงูุฎุฏูุงุช."
      }
    ],
    footerAddress: "ูุฏููู โ ูุฎุฏูู ูู ูุงูู ุฃูุญุงุก ุชููุณ",
    footerHours: "ูู ุงูุฅุซููู ููุณุจุชุ 08:00 - 18:00 | ุงูุฃุญุฏ ุฑุงุญุฉ"
  },
  fr: {
    mainTitle: "Atelier Electronique Mรฉdenine - Rรฉparations รฉlectroniques",
    mainDesc: "Service รฉlectronique qui vous atteint partout en Tunisie ๐น๐ณ",
    btnMaps: "Google Maps",
    btnWhatsApp: "WhatsApp",
    servicesTitle: "Nos Services",
    servicesList: [
      "Rรฉparation et maintenance d'appareils รฉlectroniques : ordinateurs, frigos inverter, cartes รฉlectroniques",
      "Vente de piรจces dรฉtachรฉes sur demande",
      "Diagnostic prรฉcis ร distance",
      "Envoi de photos et vidรฉos avant rรฉparation",
      "Rapiditรฉ, sรฉcuritรฉ et garantie du service"
    ],
    galleryTitle: "Galerie photos et vidรฉos",
    radioTitle: "Radio du Coran",
    newsTitle: "Derniรจres nouvelles de BBC Arabe",
    newsLoading: "Chargement des actualitรฉs...",
    faqTitle: "Questions frรฉquentes",
    faqItems: [
      {
        question: "Comment puis-je envoyer mon appareil pour rรฉparation ?",
        answer: "Vous pouvez envoyer votre appareil par courrier avec un formulaire de diagnostic sur notre site."
      },
      {
        question: "Offrez-vous une garantie sur la rรฉparation ?",
        answer: "Oui, nous offrons une garantie de 6 mois sur tous les services."
      }
    ],
    footerAddress: "Medenine โ Service dans toute la Tunisie",
    footerHours: "Du lundi au samedi, 08h00 - 18h00 | dimanche fermรฉ"
  }
};

function setLanguage(lang) {
  document.getElementById('mainTitle').textContent = texts[lang].mainTitle;
  document.getElementById('mainDesc').textContent = texts[lang].mainDesc;
  document.getElementById('btnMaps').textContent = texts[lang].btnMaps;
  document.getElementById('btnWhatsApp').textContent = texts[lang].btnWhatsApp;
  document.getElementById('servicesTitle').textContent = texts[lang].servicesTitle;

  const servicesList = document.getElementById('servicesList');
  servicesList.innerHTML = '';
  texts[lang].servicesList.forEach(item => {
    const li = document.createElement('li');
    li.textContent = item;
    servicesList.appendChild(li);
  });

  document.getElementById('galleryTitle').textContent = texts[lang].galleryTitle;
  document.getElementById('radioTitle').textContent = texts[lang].radioTitle;
  document.getElementById('newsTitle').textContent = texts[lang].newsTitle;

  document.getElementById('faqTitle').textContent = texts[lang].faqTitle;
  const faqItems = texts[lang].faqItems;
  const faqContainer = document.querySelector('.faq');
  // Remove old faq items except the title
  faqContainer.querySelectorAll('.faq-item').forEach(el => el.remove());

  faqItems.forEach(faq => {
    const faqItem = document.createElement('div');
    faqItem.classList.add('faq-item');

    const btn = document.createElement('button');
    btn.classList.add('faq-question');
    btn.textContent = faq.question;

    const ans = document.createElement('div');
    ans.classList.add('faq-answer');
    ans.textContent = faq.answer;

    faqItem.appendChild(btn);
    faqItem.appendChild(ans);
    faqContainer.appendChild(faqItem);

    // Add toggle event
    btn.addEventListener('click', () => {
      const visible = ans.style.display === 'block';
      document.querySelectorAll('.faq-answer').forEach(el => (el.style.display = 'none'));
      ans.style.display = visible ? 'none' : 'block';
    });
  });

  document.getElementById('footerAddress').textContent = texts[lang].footerAddress;
  document.getElementById('footerHours').textContent = texts[lang].footerHours;

  // Direction & lang attribute update
  if (lang === 'ar') {
    document.documentElement.lang = 'ar';
    document.documentElement.dir = 'rtl';
  } else {
    document.documentElement.lang = 'fr';
    document.documentElement.dir = 'ltr';
  }
}

let currentLang = 'ar';

langToggle.addEventListener('click', () => {
  currentLang = currentLang === 'ar' ? 'fr' : 'ar';
  setLanguage(currentLang);
  langToggle.textContent = currentLang === 'ar' ? 'Franรงais' : 'ุนุฑุจู';
});

// Initial load
setLanguage(currentLang);

// Fetch BBC Arabic RSS feed (simplified)
const newsList = document.getElementById('newsList');
newsList.textContent = texts.ar.newsLoading;

// To avoid CORS issues, real fetch needs a proxy or backend; so here just sample data:
setTimeout(() => {
  newsList.innerHTML = `
    <li>ุชููุณ ุชูุฌูุฒ ูููุณู ุณูุงุญู ูุงุฌุญ ุฑุบู ุงูุชุญุฏูุงุช</li>
    <li>ููุฌุฉ ุญุฑู ุชุถุฑุจ ุงูุจูุงุฏ ูุณุท ุชุญุฐูุฑุงุช ูู ุงูุฏูุงุน ุงููุฏูู</li>
    <li>ุชุทูุฑุงุช ุฌุฏูุฏุฉ ูู ูุทุงุน ุงูุฅููุชุฑูููุงุช ูุตูุงูุฉ ุงูุฃุฌูุฒุฉ</li>
  `;
}, 1500);
