// FAQ toggle function
function faqToggle(btn, answer) {
  const visible = answer.style.display === 'block';
  document.querySelectorAll('.faq-answer').forEach(el => (el.style.display = 'none'));
  answer.style.display = visible ? 'none' : 'block';
}

// Language toggle Arabic <-> English
const langToggle = document.getElementById('langToggle');

const texts = {
  ar: {
    mainTitle: "ÙˆØ±Ø´Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠÙƒ Ø§Ù„Ø±Ø­Ù…Ø§Ù†ÙŠ - Atelier Electronique MÃ©denine",
    mainDesc: "Ø®Ø¯Ù…Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠÙƒ ØªÙˆØµÙ„Ùƒ ÙˆÙŠÙ† Ù…Ø§ ÙƒÙ†Øª ÙÙŠ ØªÙˆÙ†Ø³ ðŸ‡¹ðŸ‡³",
    btnMaps: "Ø®Ø±Ø§Ø¦Ø· Google",
    btnWhatsApp: "ÙˆØ§ØªØ³Ø§Ø¨",
    servicesTitle: "Ø®Ø¯Ù…Ø§ØªÙ†Ø§",
    servicesList: [
      "ØªØµÙ„ÙŠØ­ ÙˆØµÙŠØ§Ù†Ø© Ø£Ø¬Ù‡Ø²Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©: ÙƒÙ…Ø¨ÙŠÙˆØªØ±ØŒ Ø«Ù„Ø§Ø¬Ø§Øª Ø¥Ù†ÙØ±ØªØ±ØŒ ÙƒØ±ÙˆØª Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©",
      "Ø¨ÙŠØ¹ Ù‚Ø·Ø¹ ØºÙŠØ§Ø± Ø­Ø³Ø¨ Ø§Ù„Ø·Ù„Ø¨",
      "Ø®Ø¯Ù…Ø© Ø§Ù„ØªØ´Ø®ÙŠØµ Ø¹Ù† Ø¨ÙØ¹Ø¯ Ø¨Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©",
      "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¨Ø§Ù„Ø­Ø§Ù„Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø¥ØµÙ„Ø§Ø­",
      "Ø§Ù„Ø³Ø±Ø¹Ø©ØŒ Ø§Ù„Ø£Ù…Ø§Ù†ØŒ ÙˆØ¶Ù…Ø§Ù† Ø§Ù„Ø®Ø¯Ù…Ø©"
    ],
    galleryTitle: "Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª",
    radioTitle: "Ø±Ø§Ø¯ÙŠÙˆ Ø§Ù„Ù‚Ø±Ø¢Ù†",
    newsTitle: "Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ù…Ù† BBC Ø¹Ø±Ø¨ÙŠ",
    newsLoading: "Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±...",
    faqTitle: "Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©",
    faqItems: [
      {
        question: "ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø¬Ù‡Ø§Ø²ÙŠ Ù„Ù„Ø¥ØµÙ„Ø§Ø­ØŸ",
        answer: "ØªØ³ØªØ·ÙŠØ¹ Ø¥Ø±Ø³Ø§Ù„ Ø¬Ù‡Ø§Ø²Ùƒ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…Ø¹ ØªØ¹Ø¨Ø¦Ø© Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ´Ø®ÙŠØµ Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹Ù†Ø§."
      },
      {
        question: "Ù‡Ù„ ØªÙ‚Ø¯Ù…ÙˆÙ† Ø¶Ù…Ø§Ù†Ù‹Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø¥ØµÙ„Ø§Ø­ØŸ",
        answer: "Ù†Ø¹Ù…ØŒ Ù†Ù‚Ø¯Ù… Ø¶Ù…Ø§Ù†Ù‹Ø§ Ù„Ù…Ø¯Ø© 6 Ø£Ø´Ù‡Ø± Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª."
      }
    ],
    footerAddress: "Ù…Ø¯Ù†ÙŠÙ† â€“ Ù†Ø®Ø¯Ù…Ùˆ ÙÙŠ ÙƒØ§Ù…Ù„ Ø£Ù†Ø­Ø§Ø¡ ØªÙˆÙ†Ø³",
    footerHours: "Ù…Ù† Ø§Ù„Ø¥Ø«Ù†ÙŠÙ† Ù„Ù„Ø³Ø¨ØªØŒ 08:00 - 18:00 | Ø§Ù„Ø£Ø­Ø¯ Ø±Ø§Ø­Ø©"
  },
  en: {
    mainTitle: "Atelier Electronique MÃ©denine - Electronic Repairs",
    mainDesc: "Electronic service reaching you anywhere in Tunisia ðŸ‡¹ðŸ‡³",
    btnMaps: "Google Maps",
    btnWhatsApp: "WhatsApp",
    servicesTitle: "Our Services",
    servicesList: [
      "Repair and maintenance of electronic devices: computers, inverter fridges, electronic cards",
      "Spare parts sales upon request",
      "Accurate remote diagnosis",
      "Sending photos and videos before repair",
      "Speed, safety, and service warranty"
    ],
    galleryTitle: "Photo & Video Gallery",
    radioTitle: "Quran Radio",
    newsTitle: "Latest News from BBC Arabic",
    newsLoading: "Loading news...",
    faqTitle: "Frequently Asked Questions",
    faqItems: [
      {
        question: "How can I send my device for repair?",
        answer: "You can send your device by mail with a diagnostic form on our website."
      },
      {
        question: "Do you offer warranty on repairs?",
        answer: "Yes, we offer a 6-month warranty on all services."
      }
    ],
    footerAddress: "Medenine â€“ Service across Tunisia",
    footerHours: "Monday to Saturday, 08:00 - 18:00 | Sunday closed"
  }
};

let currentLang = 'ar';

function setLanguage(lang) {
  // Text replacements
  document.getElementById('mainTitle').textContent = texts[lang].mainTitle;
  document.getElementById('mainDesc').textContent = texts[lang].mainDesc;
  document.getElementById('btnMaps').textContent = texts[lang].btnMaps;
  document.getElementById('btnWhatsApp').textContent = texts[lang].btnWhatsApp;
  document.getElementById('servicesTitle').textContent = texts[lang].servicesTitle;

  const servicesList = document.getElementById('servicesList');
  servicesList.innerHTML = '';
  texts[lang].servicesList.forEach(item => {
    const li = document.createElement('li');
    li.textContent = item;
    servicesList.appendChild(li);
  });

  document.getElementById('galleryTitle').textContent = texts[lang].galleryTitle;
  document.getElementById('radioTitle').textContent = texts[lang].radioTitle;
  document.getElementById('newsTitle').textContent = texts[lang].newsTitle;

  // FAQ
  const faqContainer = document.querySelector('.faq');
  faqContainer.querySelectorAll('.faq-item').forEach(el => el.remove());
  texts[lang].faqItems.forEach(faq => {
    const faqItem = document.createElement('div');
    faqItem.classList.add('faq-item');

    const btn = document.createElement('button');
    btn.classList.add('faq-question');
    btn.textContent = faq.question;

    const ans = document.createElement('div');
    ans.classList.add('faq-answer');
    ans.textContent = faq.answer;

    faqItem.appendChild(btn);
    faqItem.appendChild(ans);
    faqContainer.appendChild(faqItem);

    btn.addEventListener('click', () => faqToggle(btn, ans));
  });

  document.getElementById('footerAddress').textContent = texts[lang].footerAddress;
  document.getElementById('footerHours').textContent = texts[lang].footerHours;

  // Direction & lang attribute
  if(lang === 'ar'){
    document.documentElement.lang = 'ar';
    document.documentElement.dir = 'rtl';
  } else {
    document.documentElement.lang = 'en';
    document.documentElement.dir = 'ltr';
  }
}

langToggle.addEventListener('click', () => {
  currentLang = currentLang === 'ar' ? 'en' : 'ar';
  setLanguage(currentLang);
  langToggle.textContent = currentLang === 'ar' ? 'English' : 'Ø¹Ø±Ø¨ÙŠ';
});

// Initial language setup
setLanguage(currentLang);

// Simulated news loading
const newsList = document.getElementById('newsList');
newsList.innerHTML = `<li>${texts[currentLang].newsLoading}</li>`;

setTimeout(() => {
  const newsItems = currentLang === 'ar'
    ? [
      "ØªÙˆÙ†Ø³ ØªÙØ¬Ù‡Ø² Ù„Ù…ÙˆØ³Ù… Ø³ÙŠØ§Ø­ÙŠ Ù†Ø§Ø¬Ø­ Ø±ØºÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª",
      "Ù…ÙˆØ¬Ø© Ø­Ø±Ù‘ ØªØ¶Ø±Ø¨ Ø§Ù„Ø¨Ù„Ø§Ø¯ ÙˆØ³Ø· ØªØ­Ø°ÙŠØ±Ø§Øª Ù…Ù† Ø§Ù„Ø¯ÙØ§Ø¹ Ø§Ù„Ù…Ø¯Ù†ÙŠ",
      "ØªØ·ÙˆØ±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª ÙˆØµÙŠØ§Ù†Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©"
    ]
    : [
      "Tunisia prepares for a successful tourist season despite challenges",
      "Heatwave hits the country amid civil defense warnings",
      "New developments in electronics and device repair sector"
    ];

  newsList.innerHTML = newsItems.map(item => `<li>${item}</li>`).join('');
}, 1500);
