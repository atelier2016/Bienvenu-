document.addEventListener("DOMContentLoaded", () => {
  const langToggle = document.getElementById("lang-toggle");
  let currentLang = "ar"; // Ø§Ù„Ù„ØºØ© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©

  const translations = {
    ar: {
      home: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
      services: "Ø§Ù„Ø®Ø¯Ù…Ø§Øª",
      gallery: "Ø§Ù„Ù…Ø¹Ø±Ø¶",
      contact: "ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§",
      heroTitle: "ğŸ”§ ÙˆØ±Ø´Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠÙƒ Ø§Ù„Ø±Ø­Ù…Ø§Ù†ÙŠ",
      heroText: "ØªØµÙ„ÙŠØ­ Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ÙƒØ±ÙˆØª Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© â€“ Ø®Ø¯Ù…Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø£Ù†Ø­Ø§Ø¡ ØªÙˆÙ†Ø³",
      phone: "ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ù„Ù‰",
      service1: "ØªØµÙ„ÙŠØ­ ÙƒØ±ÙˆØª Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©",
      service2: "ÙƒÙ…Ø¨ÙŠÙˆØªØ±Ø§Øª ÙˆØ£Ø¬Ù‡Ø²Ø©",
      service3: "Ø«Ù„Ø§Ø¬Ø§Øª Ø¥Ù†ÙØ±ØªØ±",
      service4: "Ø¨ÙŠØ¹ Ù‚Ø·Ø¹ ØºÙŠØ§Ø±",
      videoTitle: "ğŸ“½ï¸ ÙÙŠØ¯ÙŠÙˆ ØªØ¹Ø±ÙŠÙÙŠ",
      mapTitle: "ğŸ“ Ù…ÙˆÙ‚Ø¹ Ø§Ù„ÙˆØ±Ø´Ø©",
      whatsapp: "Ø±Ø§Ø³Ù„Ù†Ø§ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨",
      facebook: "ØªØ§Ø¨Ø¹Ù†Ø§ Ø¹Ù„Ù‰ ÙØ§ÙŠØ³Ø¨ÙˆÙƒ",
      footerText: "Â© 2025 ÙˆØ±Ø´Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠÙƒ Ø§Ù„Ø±Ø­Ù…Ø§Ù†ÙŠ - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©",
      footerLoc: "Ù…Ø¯Ù†ÙŠÙ†ØŒ ØªÙˆÙ†Ø³ | Ù…Ù† Ø§Ù„Ø¥Ø«Ù†ÙŠÙ† Ù„Ù„Ø³Ø¨ØªØŒ 08:00 - 18:00",
    },
    en: {
      home: "Home",
      services: "Services",
      gallery: "Gallery",
      contact: "Contact",
      heroTitle: "ğŸ”§ Atelier Electronique Rahmani",
      heroText: "Repair of all types of electronic boards â€“ Service across Tunisia",
      phone: "Contact us at",
      service1: "Electronic board repair",
      service2: "Computers & Devices",
      service3: "Inverter Fridges",
      service4: "Spare Parts",
      videoTitle: "ğŸ“½ï¸ Intro Video",
      mapTitle: "ğŸ“ Workshop Location",
      whatsapp: "Chat on WhatsApp",
      facebook: "Follow us on Facebook",
      footerText: "Â© 2025 Atelier Electronique Rahmani - All rights reserved",
      footerLoc: "MÃ©denine, Tunisia | Mon-Sat, 08:00 - 18:00",
    }
  };

  // Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ©
  function updateTexts(lang) {
    const t = translations[lang];
    document.querySelectorAll(".lang").forEach(el => {
      const key = el.getAttribute("data-key");
      if (t[key]) el.textContent = t[key];
    });

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Øµ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù‡Ø§ØªÙ (ÙÙŠ ÙÙ‚Ø±Ø© Ø¯Ø§Ø®Ù„ hero)
    const phonePara = document.querySelector(".hero p:nth-of-type(2)");
    if (lang === "ar") {
      phonePara.innerHTML = `${translations.ar.phone} <strong>+216 98 192 103</strong>`;
    } else {
      phonePara.innerHTML = `${translations.en.phone} <strong>+216 98 192 103</strong>`;
    }

    // ØªØºÙŠÙŠØ± Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØµÙØ­Ø© ÙˆÙ„ØºØ© html
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";
    document.body.style.textAlign = lang === "ar" ? "right" : "left";
  }

  // ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
  langToggle.addEventListener("click", () => {
    currentLang = currentLang === "ar" ? "en" : "ar";
    langToggle.textContent = currentLang === "ar" ? "EN" : "AR";
    updateTexts(currentLang);
  });

  // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¹Ù†Ø¯ Ø¸Ù‡ÙˆØ± Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø© (intersection observer)
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add("visible");
      }
    });
  }, {
    threshold: 0.1
  });

  // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙ„Ø§Ø³ Ù„Ù„Ø¹Ù†ØµØ± Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù†
  document.querySelectorAll(".fade-slide").forEach(el => {
    observer.observe(el);
  });

  // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙŠ Ø§Ù„Ø£ÙˆÙ„ÙŠ
  updateTexts(currentLang);
});
